{"id":"source-010","title":"ACL: Implement ACL_$ENTER_SUBS function","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-16T22:31:20.023574-08:00","created_by":"toshok","updated_at":"2026-01-16T22:31:20.023574-08:00"}
{"id":"source-15l","title":"MST internal mapping function FUN_00e43182","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T20:38:43.668253-08:00","created_by":"toshok","updated_at":"2026-01-13T20:38:43.668253-08:00"}
{"id":"source-573","title":"MST remaining unmap variants (UNMAP_ALL, etc)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-13T20:38:50.096915-08:00","created_by":"toshok","updated_at":"2026-01-13T20:38:50.096915-08:00"}
{"id":"source-7vz","title":"MST wire and page management (mst_$unwire_*)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-13T20:38:50.181276-08:00","created_by":"toshok","updated_at":"2026-01-13T20:38:50.181276-08:00"}
{"id":"source-a97","title":"Add bounds checking to TERM_$STATUS_CONVERT","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-12T10:35:28.559937-08:00","created_by":"toshok","updated_at":"2026-01-12T10:35:28.559937-08:00"}
{"id":"source-aha","title":"Reverse engineer NAME_$ subsystem","description":"Reverse engineer the NAME_$ subsystem which handles naming/pathname operations in Domain/OS. Includes:\n- Core NAME_$ functions (init, validate, resolve, drop, cleanup, etc.)\n- REM_NAME_$ functions (remote naming operations)\n- NAMEQ helper function\n- Directory operations (wdir, ndir)\n- UID-related functions","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-16T10:10:44.631646-08:00","created_by":"toshok","updated_at":"2026-01-16T11:32:31.852146-08:00","closed_at":"2026-01-16T11:32:31.852146-08:00","close_reason":"NAME_$ subsystem implementation complete with all functions, tests, and Makefile integration.","comments":[{"id":1,"issue_id":"source-aha","author":"toshok","text":"Implemented NAMEQ (0x00e49eac) - Pascal string comparison that ignores trailing spaces","created_at":"2026-01-16T18:13:38Z"},{"id":2,"issue_id":"source-aha","author":"toshok","text":"Implemented NAME_$VALIDATE (0x00e49f4c) - pathname validation and type detection","created_at":"2026-01-16T18:43:32Z"},{"id":3,"issue_id":"source-aha","author":"toshok","text":"Implemented NAME_$VALIDATE (0x00e49f4c) and NAME_$RESOLVE (0x00e4a258) with internal helpers name_$parse_component and name_$resolve_internal. Renamed FUN_00e4a004 -\u003e name_$parse_component and FUN_00e4a060 -\u003e name_$resolve_internal in Ghidra.","created_at":"2026-01-16T18:44:36Z"},{"id":4,"issue_id":"source-aha","author":"toshok","text":"Implemented NAME_$DROP (0x00e4a2b8) and NAME_$CR_FILE (0x00e4a316). Also implemented helper functions name_$split_path (0x00e49e48) and name_$resolve_dir_and_leaf (0x00e4a1e2). Renamed these functions in Ghidra.","created_at":"2026-01-16T18:46:38Z"},{"id":5,"issue_id":"source-aha","author":"toshok","text":"Implemented directory functions (NAME_$SET_WDIR, NAME_$SET_WDIRUS, NAME_$SET_NDIRUS), cleanup functions (NAME_$CLEANUP, NAME_$SET_ACL), UID getters, and ASID management functions (NAME_$INIT_ASID, NAME_$FORK, NAME_$FREE_ASID).","created_at":"2026-01-16T19:11:48Z"},{"id":6,"issue_id":"source-aha","author":"toshok","text":"Implemented REM_NAME_$ functions (remote naming stubs) and NAME_$INIT with name_$init_check_status helper. Renamed FUN_00e31578 -\u003e name_$init_check_status in Ghidra.","created_at":"2026-01-16T19:14:11Z"},{"id":7,"issue_id":"source-aha","author":"toshok","text":"Successfully built libname.a. All NAME_$ and REM_NAME_$ functions implemented. Fixed signature mismatches in headers during build.","created_at":"2026-01-16T19:16:30Z"}]}
{"id":"source-bl7","title":"Implement PROC1_$ (Process Management) module","description":"Implement the PROC1_$ process management API with 50+ functions.\n\n## Functions identified:\n### Process lifecycle:\n- PROC1_$CREATE_P, PROC1_$BIND, PROC1_$UNBIND\n- PROC1_$SUSPEND, PROC1_$SUSPENDP, PROC1_$RESUME, PROC1_$TRY_TO_SUSPEND\n\n### Scheduling/Ready list:\n- PROC1_$DISPATCH, PROC1_$DISPATCH_INT, PROC1_$DISPATCH_INT2, PROC1_$DISPATCH_INT3\n- PROC1_$ADD_READY, PROC1_$REMOVE_READY, PROC1_$REORDER_READY\n- proc1_$remove_from_ready_list, proc1_$insert_into_ready_list, proc1_$reorder_if_needed\n\n### Locking:\n- PROC1_$SET_LOCK, PROC1_$CLR_LOCK, PROC1_$TST_LOCK, PROC1_$GET_LOCKS\n\n### Atomic operations:\n- PROC1_$BEGIN_ATOMIC_OP, PROC1_$END_ATOMIC_OP\n- PROC1_$INHIBIT_BEGIN, PROC1_$INHIBIT_END, PROC1_$INHIBIT_CHECK\n\n### Event count integration:\n- PROC1_$EC_WAITN\n\n### CPU/Load tracking:\n- PROC1_$GET_CPUT, PROC1_$GET_CPUT8, PROC1_$GET_CPU_USAGE, PROC1_$GET_ANY_CPUT, PROC1_$GET_ANY_CPU_USAGE\n- PROC1_$GET_LOADAV, PROC1_$LOADAV_CALLBACK, PROC1_$INIT_LOADAV\n\n### Other:\n- PROC1_$INIT, PROC1_$SET_ASID, PROC1_$SET_PRIORITY, PROC1_$SET_TYPE, PROC1_$GET_TYPE\n- PROC1_$VT_INT, PROC1_$SET_VT, PROC1_$SET_TS, PROC1_$TS_END_CALLBACK\n- PROC1_$ALLOC_STACK, PROC1_$FREE_STACK, PROC1_$GET_INFO, PROC1_$GET_LIST, PROC1_$GET_USP\n\n## PCB structure discovered:\n- 0x00: nextp, 0x04: prevp (ready list links)\n- 0x08-0x34: saved D2-D7, A2-A6, A7 registers\n- 0x38: saved USP\n- 0x3c: wait_start\n- 0x40: resource_locks_held (priority/lock bitmask)\n- 0x44: mypid, 0x46: asid\n- 0x48: vtimer, 0x4c-0x50: cpu_total/usage\n- 0x52: state, 0x54-0x55: pri_min/flags\n\n## Key globals:\n- PROC1_$CURRENT_PCB: 0xe1eac8\n- PROC1_$CURRENT: 0xe20608\n- PROC1_$READY_PCB: PC-relative\n- PROC1_$ATOMIC_OP_DEPTH: 0xe2060e\n- PCBS table: 0xe1eacc\n\n## Assembly patterns:\n- ori #0x700,SR / andi #-0x701,SR for interrupt disable/enable\n- movem.l for register save/restore in context switch\n- USP manipulation for user/supervisor stack handling","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-13T12:06:10.257198-08:00","created_by":"toshok","updated_at":"2026-01-14T10:31:21.245915-08:00","closed_at":"2026-01-14T10:31:21.245915-08:00","close_reason":"Implemented all PROC1_$ functions: 44 C source files and 3 assembly files for process management module including lifecycle, scheduling, locks, timers, CPU tracking, and dispatcher"}
{"id":"source-c0n","title":"Replace DTTE #define offsets with properly padded struct","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-12T14:43:56.802285-08:00","created_by":"toshok","updated_at":"2026-01-12T15:32:06.396403-08:00","closed_at":"2026-01-12T15:32:06.396403-08:00","close_reason":"Replaced DTTE #defines with properly padded dtte_t struct with named fields. Updated all term/*.c files to use struct access."}
{"id":"source-e7v","title":"PROC2_$ API Implementation","description":"Implementation of PROC2_$ high-level process management API. This module provides:\n- Process creation, forking, and deletion\n- Process naming and identification (UIDs, UPIDs)\n- Signal handling (BSD-style signals)\n- Process groups\n- Process information queries\n- Debug support\n\n64 functions identified. Structure analysis shows:\n- Process info table at 0xEA551C (228 bytes per entry)\n- Mapping table at 0xEA93D2 (PROC1 PID to PROC2 index)\n- Lock ID 4 for PROC2 operations\n\nCurrent progress: Header with 64 function declarations, 5 implementations","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-13T13:09:42.396454-08:00","created_by":"toshok","updated_at":"2026-01-13T20:26:23.432996-08:00","closed_at":"2026-01-13T20:26:23.432996-08:00","close_reason":"All 69 public PROC2 functions implemented plus 4 internal functions. Module complete."}
{"id":"source-f2l","title":"MST_$FORK - fork support for MST","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T20:38:43.585146-08:00","created_by":"toshok","updated_at":"2026-01-13T20:38:43.585146-08:00"}
{"id":"source-fzg","title":"Identify and type all DAT_* unknown data in term/ directory","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T14:43:56.729649-08:00","created_by":"toshok","updated_at":"2026-01-12T14:43:56.729649-08:00"}
{"id":"source-ga3","title":"Clean up extern declarations in all subsystems","description":"Remove all `extern` declarations from .c files and move them to proper header files.\n\n## Guidelines:\n- Public header: types/functions needed by OTHER subsystems\n- Internal header: helpers/types used ONLY within the subsystem\n- If a needed header doesn't exist, create it with just the required prototypes\n- **Symbols ending in _$UID (e.g., LV_LABEL_$UID) should go in uid/uid.h**\n\n## Subsystems status:\n- [x] arch/ (empty - no files)\n- [x] ast/ (completed)\n- [x] base/ (no .c files)\n- [x] cal/ (completed - 4 files updated)\n- [x] disk/ (completed - 18 files updated)\n- [x] ec/ (completed - created ec_internal.h)\n- [ ] flp/ (~75 externs - floppy driver data)\n- [x] math/ (already clean)\n- [x] misc/ (completed - 1 file updated)\n- [x] ml/ (completed - 3 files updated)\n- [x] mmap/ (completed - created mmap_internal.h)\n- [x] mmu/ (completed - created mmu_internal.h)\n- [x] mst/ (completed - created mst_internal.h)\n- [ ] os/ (152 externs in 4 files - mostly init.c/shutdown.c)\n- [x] osinfo/ (completed - 39 externs cleaned)\n- [x] pmap/ (completed - created pmap_internal.h)\n- [x] proc1/ (completed - created proc1_internal.h)\n- [ ] proc2/ (116 externs in 36 files)\n- [x] tape/ (already clean)\n- [ ] term/ (84 externs in 14 files)\n- [x] time/ (completed)\n- [x] tty/ (completed - created tty_internal.h)\n- [x] uid/ (already clean)\n- [x] win/ (completed - 1 file updated)\n\n## Headers created:\n- di/di.h, fim/fim.h, timer/timer.h\n- time/time_internal.h, ast/ast_internal.h\n- acl/acl.h, vtoc/vtoc.h, netbuf/netbuf.h\n- network/network.h, rem_file/rem_file.h\n- dxm/dxm.h, bat/bat.h, route/route.h, area/area.h, anon/anon.h\n- dbuf/dbuf.h, wp/wp.h, cache/cache.h\n- disk/disk_internal.h\n- kbd/kbd.h, prom/prom.h, ml/ml_internal.h\n- ec/ec_internal.h, mmap/mmap_internal.h\n- mmu/mmu_internal.h, mst/mst_internal.h\n- proc1/proc1_internal.h, tty/tty_internal.h\n- pmap/pmap_internal.h, smd/smd.h, dtty/dtty.h","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-14T14:44:54.451337-08:00","created_by":"toshok","updated_at":"2026-01-14T18:49:31.244931-08:00","closed_at":"2026-01-14T18:49:31.244931-08:00","close_reason":"Completed cleanup of extern declarations in all 8 remaining subsystems: proc1/, tty/, osinfo/, pmap/, term/, flp/, proc2/, os/. Created internal headers for each subsystem with proper declarations."}
{"id":"source-k7f","title":"Continue PROC2_$ module implementation","description":"Continue implementing the PROC2_$ high-level process management module.\n\n## Progress\n- **Implemented**: ~65 of 76 functions\n- **Remaining**: ~11 functions\n\n## Recently Implemented\n\n### Debug Support (DONE)\nDEBUG, OVERRIDE_DEBUG, UNDEBUG\n\n### Process Information (DONE)\nGET_EC, GET_CR_REC, GET_REGS, INFO, GET_INFO, BUILD_INFO_INTERNAL\n\n### Process Groups (DONE)\nSET_PGROUP, PGROUP_INFO, UID_TO_PGROUP_INDEX\n\n### Process Creation/Deletion - Simple (DONE)\nCOMPLETE_FORK, STARTUP, DELETE, SET_VALID\n\n## Remaining Functions by Category\n\n### Process Creation/Deletion (Complex)\n- INIT (~1210 bytes), CREATE (~1250 bytes), FORK (~1814 bytes)\n- COMPLETE_VFORK (~552 bytes)\n\n### Signal Handling (Internal)\n- DELIVER_SIGNAL_INTERNAL, DELIVER_PENDING_INTERNAL\n- DELIVER_PENDING, SIGRETURN, LOG_SIGNAL_EVENT\n\n## Notes\n- All code in proc2/ directory\n- Header file: proc2/proc2.h\n- Many functions share patterns: ML_$LOCK(4), FIM_$CLEANUP, entry lookup","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-13T16:42:26.528796-08:00","created_by":"toshok","updated_at":"2026-01-13T20:26:23.435061-08:00","closed_at":"2026-01-13T20:26:23.435061-08:00","close_reason":"All 69 public PROC2 functions implemented plus 4 internal functions. Module complete."}
{"id":"source-mst","title":"SMD_$ subsystem analysis and implementation","description":"# SMD_$ Subsystem Analysis and Implementation\n\n## Overview\nSMD = Screen Management Display - manages display hardware, cursors, fonts, and screen operations for Domain/OS.\n\n## Analysis Complete\n- **75+ functions identified** in the SMD_$ namespace\n- **Key data structures mapped**:\n  - `smd_globals_t` at 0x00E82B8C - global state including ASID-to-unit mapping, blanking state\n  - `smd_display_unit_t` at 0x00E2E3FC - per-display unit state (0x10C bytes each)\n  - `smd_display_hw_t` - hardware info pointed from unit (display type, dimensions, lock state, etc.)\n  - `smd_display_info_t` at 0x00E27376 - display configuration (0x60 bytes each)\n\n## Files Created\n- `smd/smd.h` - Public API (50+ function prototypes)\n- `smd/smd_internal.h` - Internal structures and helpers\n- `smd/smd_data.c` - Global variable definitions\n- `smd/cold_init.c` - SMD_$COLD_INIT (no-op stub)\n- `smd/unblank.c` - SMD_$UNBLANK implementation\n- `smd/inq_disp_type.c` - SMD_$INQ_DISP_TYPE implementation\n- `smd/inq_disp_info.c` - SMD_$INQ_DISP_INFO implementation\n- `smd/video_ctl.c` - SMD_$VIDEO_CTL implementation\n- `smd/assoc.c` - SMD_$ASSOC implementation\n- `smd/sau2/lock_display.s` - SMD_$LOCK_DISPLAY assembly (uses SR manipulation)\n- `tpad/tpad.h` - Stub header for trackpad subsystem\n\n## Build Status\n- Makefile updated to include smd/*.c and smd/sau2/*.s\n- Build blocked by pre-existing issues in ast/allocate_aste.c (CRASH_SYSTEM signature mismatch)\n- Once ast issue fixed, SMD files should compile\n\n## Key Functions Analyzed\n- SMD_$INIT (0x00E34D2C) - Main initialization, has jump table complexity\n- SMD_$ASSOC (0x00E6D882) - Associates display with process ASID\n- SMD_$INQ_DISP_INFO (0x00E70124) - Returns display type, dimensions, bit depth\n- SMD_$VIDEO_CTL (0x00E6F838) - Enable/disable video output\n- SMD_$UNBLANK (0x00E6EFB4) - Restore blanked display\n- SMD_$LOCK_DISPLAY (0x00E15CCE) - Low-level lock with interrupt disable\n\n## Display Types Identified\n- 1, 2: Mono landscape/portrait (1024x800 / 800x1024)\n- 3, 4: Color 1024x2048\n- 5, 9: Hi-res 2048x1024\n- 6, 8, 10, 11: Mono 1024x1024 variants\n\n## Remaining Work\n- Fix pre-existing build issues in ast/ subsystem\n- Implement remaining SMD functions (BLT, scroll, cursor, font, tracking)\n- Add unit tests for non-hardware-dependent functions\n- Complete SMD_$INIT (complex jump table decompilation)\n\n## Dependencies\n- ec/ec.h - Event counts for synchronization\n- proc1/proc1.h - PROC1_$AS_ID for current process\n- time/time.h - TIME_$CLOCKH for blanking timestamps\n- term/term.h - TERM_$SET_REAL_LINE_DISCIPLINE\n- tpad/tpad.h - TPAD_$SET_UNIT (stub created)","status":"in_progress","priority":2,"issue_type":"epic","created_at":"2026-01-14T20:06:53.699248-08:00","created_by":"toshok","updated_at":"2026-01-14T20:20:47.236884-08:00"}
{"id":"source-non","title":"MST_$TOUCH - page fault handling","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T20:38:43.419711-08:00","created_by":"toshok","updated_at":"2026-01-13T20:38:43.419711-08:00"}
{"id":"source-p27","title":"Implement FILE_$ subsystem","description":"Implement the FILE_$ subsystem for domain_os. This is a large subsystem handling file operations including locking, attributes, protection, and remote file operations.\n\n## Progress\n\n### 1. Initialization - ‚úÖ COMPLETE\n| Address | Function Name | Status |\n|---------|--------------|--------|\n| 00e32744 | FILE_$LOCK_INIT | ‚úÖ |\n\n### 2. Create/Delete - ‚úÖ COMPLETE (wrappers and internal)\n| Address | Function Name | Status | Notes |\n|---------|--------------|--------|-------|\n| 00e5d778 | FILE_$CREATE | ‚úÖ | Wrapper calling FILE_$PRIV_CREATE |\n| 00e5d79e | FILE_$CREATE_IT | ‚úÖ | Wrapper with type validation |\n| 00e5d382 | FILE_$PRIV_CREATE | üî∂ | Declared, needs implementation |\n| 00e5db12 | FILE_$DELETE_OBJ | ‚úÖ | |\n| 00e5db50 | FILE_$DELETE | ‚úÖ | Wrapper |\n| 00e5db7a | FILE_$DELETE_FORCE | ‚úÖ | Wrapper |\n| 00e5fc3a | FILE_$DELETE_WHEN_UNLOCKED | ‚úÖ | Wrapper |\n| 00e5fc64 | FILE_$DELETE_FORCE_WHEN_UNLOCKED | ‚úÖ | Wrapper |\n| 00e5fc8e | FILE_$REMOVE_WHEN_UNLOCKED | ‚úÖ | Wrapper |\n| 00e5e8e0 | FILE_$DELETE_INT | ‚úÖ | Internal handler (renamed) |\n\n### 3. Attributes - ‚úÖ COMPLETE\n| Address | Function Name | Status |\n|---------|--------------|--------|\n| 00e5d7f4 | FILE_$GET_ATTR_INFO | ‚úÖ |\n| 00e5d984 | FILE_$GET_ATTRIBUTES | ‚úÖ |\n| 00e5dab0 | FILE_$ACT_ATTRIBUTES | ‚úÖ |\n| 00e5da4c | FILE_$ATTRIBUTES | ‚úÖ |\n| 00e5d242 | FILE_$SET_ATTRIBUTE | ‚úÖ |\n| 00e5e176 | FILE_$SET_TYPE | ‚úÖ |\n| 00e5e1b2 | FILE_$SET_DIRPTR | ‚úÖ |\n| 00e5e1ee | FILE_$SET_DTM_F | ‚úÖ |\n| 00e5e28e | FILE_$SET_DTM | ‚úÖ |\n| 00e5e2c2 | FILE_$SET_DTU_F | ‚úÖ |\n| 00e5e332 | FILE_$SET_DTU | ‚úÖ |\n| 00e5e362 | FILE_$SET_DEVNO | ‚úÖ |\n| 00e5e39a | FILE_$SET_MGR_ATTR | ‚úÖ |\n| 00e5e3f4 | FILE_$SET_REFCNT | ‚úÖ |\n\n### 4. Protection/ACL - ‚úÖ COMPLETE\n| Address | Function Name | Status | Notes |\n|---------|--------------|--------|-------|\n| 00e5d172 | FILE_$CHECK_PROT | ‚úÖ | Check file protection rights |\n| 00e5dd08 | FILE_$SET_PROT_INT | ‚úÖ | Internal set protection handler |\n| 00e5def4 | FILE_$GET_DEFAULT_PROT | ‚úÖ | Renamed from FUN_*, nested procedure |\n| 00e5df3a | FILE_$SET_PROT | ‚úÖ | Main set protection function |\n| 00e5e06a | FILE_$SET_ACL | ‚úÖ | Set ACL using funky format |\n| 00e5e100 | FILE_$OLD_AP | ‚úÖ | Legacy access protection |\n| 00e5dc96 | FILE_$AUDIT_SET_PROT | ‚úÖ | Audit helper (renamed from FUN_*) |\n| 00e5e476 | FILE_$CHECK_SAME_VOLUME | ‚úÖ | Volume check helper (renamed) |\n\n### 5. Flags - ‚úÖ COMPLETE\n| Address | Function Name | Status | Notes |\n|---------|--------------|--------|-------|\n| 00e5dba4 | FILE_$MK_PERMANENT | ‚úÖ | Stub returning status_$ok |\n| 00e5dbb2 | FILE_$MK_TEMPORARY | ‚úÖ | Stub returning status_$ok |\n| 00e5dbc0 | FILE_$MK_IMMUTABLE | ‚úÖ | Sets immutable flag via FILE_$SET_ATTRIBUTE |\n| 00e5dbe8 | FILE_$SET_AUDITED | ‚úÖ | Checks audit admin, sets audit flags |\n| 00e5dc42 | FILE_$SET_TROUBLE | ‚úÖ | Sets trouble flag via FILE_$SET_ATTRIBUTE |\n| 00e5dc6a | FILE_$SET_MAND_LOCK | ‚úÖ | Sets mandatory lock flag |\n\n### 6. Locking - ‚úÖ COMPLETE\n| Address | Function Name | Status | Notes |\n|---------|--------------|--------|-------|\n| 00e5ea2a | FILE_$LOCK_D | ‚úÖ | Lock wrapper |\n| 00e5ea9e | FILE_$CHANGE_LOCK_D | ‚úÖ | Change lock wrapper |\n| 00e5eb20 | FILE_$LOCK | ‚úÖ | Lock wrapper |\n| 00e5eb98 | FILE_$PRIV_LOCK_FUN_00e5eb98 | ‚úÖ | Nested helper (alloc_lock_entry) |\n| 00e5ed58 | FILE_$PRIV_LOCK_FUN_00e5ed58 | ‚úÖ | Nested helper (handle_upgrade) |\n| 00e5ed92 | FILE_$PRIV_LOCK_FUN_00e5ed92 | ‚úÖ | Nested helper (check_downgrade) |\n| 00e5ee88 | FILE_$PRIV_LOCK_FUN_00e5ee88 | ‚úÖ | Nested helper (update_lock_entry) |\n| 00e5ef08 | FILE_$PRIV_LOCK_FUN_00e5ef08 | ‚úÖ | Nested helper (check_compat) |\n| 00e5ef76 | FILE_$PRIV_LOCK_FUN_00e5ef76 | ‚úÖ | Nested helper (perform_lock) |\n| 00e5f0ee | FILE_$PRIV_LOCK | ‚úÖ | Main lock implementation (2892 bytes) |\n| 00e5fcc2 | FILE_$UNLOCK_D | ‚úÖ | Unlock wrapper |\n| 00e5fcfc | FILE_$UNLOCK | ‚úÖ | Unlock wrapper |\n| 00e5fd32 | FILE_$PRIV_UNLOCK | ‚úÖ | Main unlock implementation (1658 bytes) |\n| 00e60bd0 | FILE_$PRIV_UNLOCK_ALL | ‚úÖ | Unlock all for process |\n| 00e60d36 | FILE_$UNLOCK_VOL | ‚úÖ | Unlock all on volume |\n| 00e60db0 | FILE_$FORCE_UNLOCK | ‚úÖ | Force unlock (admin) |\n| 00e60e3e | FILE_$UNLOCK_PROC | ‚úÖ | Unlock for process |\n\n### 7. Lock Queries - ‚úÖ COMPLETE\n| Address | Function Name | Status | Notes |\n|---------|--------------|--------|-------|\n| 00e60620 | FILE_$LOCATE | ‚úÖ | Get file location from UID |\n| 00e6067c | FILE_$LOCATEI | ‚úÖ | Get file location with diskless fallback |\n| 00e6081c | FILE_$LOCAL_LOCK_VERIFY | ‚úÖ | Verify local lock ownership |\n| 00e608ec | FILE_$READ_LOCK_ENTRY | ‚úÖ | Read lock entry (wrapper, 26 bytes) |\n| 00e6093c | FILE_$READ_LOCK_ENTRYI | ‚úÖ | Read lock entry internal (660 bytes) |\n| 00e6046e | FILE_$READ_LOCK_ENTRYUI | ‚úÖ | Read lock entry by UID (handles local/remote) |\n| 00e6042e | FILE_$READ_LOCK_ENTRYU | ‚úÖ | Read lock entry by UID (wrapper) |\n| 00e6050e | FILE_$LOCAL_READ_LOCK | ‚úÖ | Read local lock table data |\n| 00e603ac | FILE_$IMPORT_LK | ‚úÖ | Import lock from another process |\n| 00e60732 | FILE_$VERIFY_LOCK_HOLDER | ‚úÖ | Verify lock holder validity (renamed from FUN_*) |\n\n### 8. File Write - ‚úÖ COMPLETE\n| Address | Function Name | Status | Notes |\n|---------|--------------|--------|-------|\n| 00e5e622 | FILE_$FW_FILE | ‚úÖ | Force write entire file |\n| 00e5e680 | FILE_$FW_PARTIAL | ‚úÖ | Force write byte range |\n| 00e5e71e | FILE_$FW_PAGES | ‚úÖ | Force write page list with sorting |\n\n### 9. Misc - NOT STARTED\n| Address | Function Name | Status |\n|---------|--------------|--------|\n| 00e5e5ae | FILE_$NEIGHBORS | ‚ùå |\n| 00e5e5f2 | FILE_$PURIFY | ‚ùå |\n\n### 10. Remote Operations - NOT STARTED (29 functions)\nSee original description for full list of REM_FILE_$* functions.\n\n## Summary\n- Total functions: 90+ (including helpers)\n- Completed: 69 (groups 1-8)\n- Partially implemented: 1 (FILE_$PRIV_CREATE declared)\n- Remaining: 20+\n\n## Legend\n- ‚úÖ Implemented\n- üî∂ Declared/partial\n- ‚ùå Not started\n\nNotes:\nGroup 8 File Write complete (3 functions implemented):\n- FILE_$FW_FILE, FILE_$FW_PARTIAL, FILE_$FW_PAGES\nCommitted in: 88fd0f7","notes":"FILE_$PRIV_CREATE implementation completed:\n- Fixed nil UID copying to include all three UIDs (owner, group, org) from separate global addresses (PPO_$NIL_USER_UID, RGYC_$G_NIL_UID, PPO_$NIL_ORG_UID)\n- Updated owner_buf structure to 48 bytes with correct layout for extended ACL data at offset 0x24\n- Added explicit copying of acl_result to owner_buf.ext to replicate original stack layout behavior\n- Fixed duplicate function declarations in file_internal.h\n\nStatus: FILE_$PRIV_CREATE is now fully implemented (was marked as 'declared, needs implementation').","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-16T11:35:56.576852-08:00","created_by":"toshok","updated_at":"2026-01-16T16:08:23.145378-08:00","closed_at":"2026-01-16T16:08:23.145378-08:00","close_reason":"Closed"}
{"id":"source-qna","title":"MST_$UNMAP_PRIVI - internal unmap function","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-13T20:38:43.504826-08:00","created_by":"toshok","updated_at":"2026-01-13T20:38:43.504826-08:00"}
{"id":"source-r1l","title":"Revisit CPU architecture vs SAU vs feature-level code organization","description":"The current code organization uses SAU (System Architecture Unit) numbers for platform-specific code splits (e.g., ec/sau2/advance.s). However, this conflates several different concerns:\n\n1. **CPU architecture** (m68k vs x86 vs ARM) - instruction set, calling conventions, register usage\n2. **SAU variants** (sau1, sau2, etc.) - Apollo-specific hardware configurations\n3. **Feature-level differences** - e.g., MMU type, peripheral support\n\nThe ec/sau2/*.s files contain m68k assembly for SR (Status Register) manipulation to disable/enable interrupts. This is fundamentally a CPU architecture concern, not an SAU-level concern - the same code would work on any m68k-based SAU.\n\nConsider reorganizing to something like:\n- `ec/arch/m68k/` for m68k-specific assembly\n- `ec/arch/x86/` for x86 equivalents (when porting)\n- Keep SAU-level splits only for actual hardware variant differences\n\nThis would make the retargetability goal clearer and avoid confusion about what each directory level represents.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-13T11:18:14.179673-08:00","created_by":"toshok","updated_at":"2026-01-13T11:18:14.179673-08:00"}
{"id":"source-srq","title":"ACL: Implement ACL_$MIN_RIGHTS function","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-16T22:31:19.608498-08:00","created_by":"toshok","updated_at":"2026-01-16T22:31:19.608498-08:00"}
{"id":"source-suh","title":"Fix FUN_ #defines in AST subsystem","description":"Fix #define FUN_ patterns in ast_internal.h by renaming functions in Ghidra.\n\nFor each function:\n1. Rename in Ghidra: gsk rename \u003cADDRESS\u003e '\u003cNAME\u003e'\n2. Update parameter names/types as needed\n3. Remove the #define from ast_internal.h\n4. Add proper function prototype\n\nFunctions to fix (21 total):\n- FUN_00e0209e ‚Üí ast_$lookup_aote_by_uid\n- FUN_00e020fa ‚Üí ast_$force_activate_segment\n- FUN_00e0250c ‚Üí ast_$lookup_aste\n- FUN_00e0255c ‚Üí ast_$lookup_or_create_aste\n- FUN_00e00c08 ‚Üí ast_$wait_for_page_transition\n- FUN_00e00d46 ‚Üí ast_$allocate_pages\n- FUN_00e0283c ‚Üí ast_$clear_transition_bits\n- FUN_00e02898 ‚Üí ast_$setup_page_read\n- FUN_00e0305c ‚Üí ast_$count_valid_pages\n- FUN_00e02af6 ‚Üí ast_$read_area_pages\n- FUN_00e02ca6 ‚Üí ast_$read_area_pages_network\n- FUN_00e01ad2 ‚Üí ast_$process_aote\n- FUN_00e00f7c ‚Üí ast_$release_aote\n- FUN_00e01d66 ‚Üí ast_$allocate_aote\n- FUN_00e013a0 ‚Üí ast_$purify_aote\n- FUN_00e01566 ‚Üí ast_$update_aste\n- FUN_00e062fa ‚Üí ast_$invalidate_with_wait\n- FUN_00e064b0 ‚Üí ast_$invalidate_no_wait\n- FUN_00e03fbc ‚Üí ast_$flush_installed_pages\n- FUN_00e05214 ‚Üí ast_$set_attribute_internal\n- FUN_00e00be8 ‚Üí ast_$validate_uid","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-14T20:24:54.713447-08:00","created_by":"toshok","updated_at":"2026-01-14T20:27:47.039237-08:00","closed_at":"2026-01-14T20:27:47.039237-08:00","close_reason":"All 21 FUN_ functions renamed in Ghidra and #defines removed from ast_internal.h. All usages in .c files updated to use actual function names."}
{"id":"source-thq","title":"ACL: Implement ACL_$RIGHTS function","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-16T22:31:19.183473-08:00","created_by":"toshok","updated_at":"2026-01-16T22:31:19.183473-08:00"}
{"id":"source-tih","title":"Implement RIP_$ subsystem (Routing Information Protocol)","description":"# RIP_$ Subsystem Implementation\n\nThe RIP (Routing Information Protocol) subsystem handles network routing table management and updates. This is a significant subsystem with 20 functions and 7 data structures.\n\n\u003e **NOTE TO FUTURE WORKERS**: Please keep this task updated with your progress as you work on it. Add completed items to the Progress section below.\n\n---\n\n## Progress\n\n### ‚úÖ Core Routing Functions (COMPLETED 2026-01-18)\n| Address    | Name                        | Status |\n|------------|----------------------------|--------|\n| 00e154e4   | RIP_$NET_LOOKUP            | ‚úÖ Implemented in `rip/net_lookup.c` |\n| 00e155c0   | RIP_$AGE                   | ‚úÖ Implemented in `rip/age.c` |\n| 00e15696   | RIP_$FIND_NEXTHOP          | ‚úÖ Implemented in `rip/find_nexthop.c` |\n\n**Also completed:**\n- `rip/rip_internal.h` - Internal data structures (rip_$entry_t, rip_$route_t, rip_$data_t)\n- `rip/lock.c` - RIP_$LOCK/RIP_$UNLOCK helpers\n- Updated `rip/rip.h` with improved API documentation\n- Renamed FUN_00e154a4 ‚Üí RIP_$LOCK, FUN_00e154c4 ‚Üí RIP_$UNLOCK in Ghidra\n- Added decompiler comments to all three core functions\n\n**Key findings:**\n- Routing table: 64 entries at 0xE26258+0x164, each 0x2C bytes\n- Each entry has 2 route slots (standard/non-standard)\n- Route states: UNUSED(0) ‚Üí VALID(1) ‚Üí AGING(2) ‚Üí EXPIRED(3)\n- RIP_$DATA base at 0xE26258, exclusion lock at +0x40\n\n---\n\n## Remaining Functions (17 total)\n\n### Port/Channel Management\n| Address    | Name                        | Notes |\n|------------|----------------------------|-------|\n| 00e15798   | RIP_$PORT_CLOSE            | Close RIP port |\n| 00e15a2c   | RIP_$STD_DEMUX             | Standard demultiplexer |\n| 00e15aae   | RIP_$STD_OPEN              | Standard open |\n\n### Update Functions\n| Address    | Name                        | Notes |\n|------------|----------------------------|-------|\n| 00e15922   | RIP_$UPDATE_INT            | Internal update |\n| 00e69084   | RIP_$UPDATE_D              | Update (debug variant?) |\n| 00e690ee   | RIP_$UPDATE                | Main update function |\n\n### Initialization\n| Address    | Name                        | Notes |\n|------------|----------------------------|-------|\n| 00e2fbd0   | RIP_$INIT                  | Subsystem initialization |\n\n### Server Functions\n| Address    | Name                        | Notes |\n|------------|----------------------------|-------|\n| 00e6887a   | RIP_$SEND_UPDATES          | Send routing updates (called by RIP_$AGE) |\n| 00e688c8   | RIP_$SERVER_FUN_00e688c8   | Server helper (needs rename) |\n| 00e68a08   | RIP_$SERVER                | Main RIP server |\n\n### Table Management\n| Address    | Name                        | Notes |\n|------------|----------------------------|-------|\n| 00e68e2c   | RIP_$TABLE_D               | Table (debug variant?) |\n| 00e68f90   | RIP_$TABLE                 | Main table function |\n\n### Broadcast/Send Functions\n| Address    | Name                        | Notes |\n|------------|----------------------------|-------|\n| 00e6914e   | RIP_$ANNOUNCE_NS           | Announce name service |\n| 00e870dc   | RIP_$SEND_FUN_00e870dc     | Send helper (needs rename) |\n| 00e871b6   | RIP_$SEND                  | Main send function |\n| 00e87298   | RIP_$BROADCAST             | Broadcast updates |\n| 00e87396   | RIP_$HALT_ROUTER           | Stop router |\n\n## Data Structures (7 total)\n\n| Address    | Name                        | Size (est) | Notes |\n|------------|----------------------------|------------|-------|\n| 00e262ac   | RIP_$STATS                 | ~0x110     | Statistics structure |\n| 00e263bc   | RIP_$INFO                  | 4+ bytes   | Info pointer/structure |\n| 00e26ebc   | RIP_$STD_IDP_CHANNEL       | 2 bytes    | IDP channel (0xFFFF = none) |\n| 00e26ebe   | RIP_$NS_ANNOUNCEMENT       | 1+ byte    | NS announcement flag |\n| 00e26ec0   | RIP_$BCAST_CONTROL         | 4 bytes    | Broadcast control |\n| 00e26ede   | RIP_$STD_RECENT_CHANGES    | 1 byte     | Recent changes flag |\n| 00e26ee0   | RIP_$RECENT_CHANGES        | 1 byte     | Recent changes flag |\n\n## Suggested Implementation Order\n\n1. ~~Core routing: RIP_$NET_LOOKUP, RIP_$FIND_NEXTHOP, RIP_$AGE~~ ‚úÖ DONE\n2. RIP_$INIT to understand initialization and data structure setup\n3. Table management: RIP_$TABLE, RIP_$TABLE_D\n4. Update functions: RIP_$UPDATE, RIP_$UPDATE_D, RIP_$UPDATE_INT\n5. Server: RIP_$SERVER, RIP_$SERVER_FUN_00e688c8, RIP_$SEND_UPDATES\n6. Send/Broadcast: RIP_$SEND, RIP_$SEND_FUN_00e870dc, RIP_$BROADCAST\n7. Port management: RIP_$STD_OPEN, RIP_$STD_DEMUX, RIP_$PORT_CLOSE\n8. Misc: RIP_$ANNOUNCE_NS, RIP_$HALT_ROUTER\n\n## Context\n\nRIP is a distance-vector routing protocol. The Apollo implementation handles:\n- Maintaining routing tables\n- Periodic route updates/broadcasts\n- Route aging and expiration\n- Integration with XNS/IDP networking stack (note RIP_$STD_IDP_CHANNEL)","status":"in_progress","priority":2,"issue_type":"feature","created_at":"2026-01-18T16:41:36.791096-08:00","created_by":"toshok","updated_at":"2026-01-18T16:53:15.361818-08:00"}
{"id":"source-uog","title":"ACL: Implement remaining SID management functions","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-16T22:31:20.447007-08:00","created_by":"toshok","updated_at":"2026-01-16T22:31:20.447007-08:00"}
{"id":"source-vgl","title":"MST remaining map variants (MAP_AT, MAPS, etc)","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-13T20:38:50.014741-08:00","created_by":"toshok","updated_at":"2026-01-13T20:38:50.014741-08:00"}

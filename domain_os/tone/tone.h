/*
 * TONE - Audio Tone Generation Module
 *
 * Provides simple tone generation for system beep/bell functionality.
 * Interfaces with the SIO2681 DUART's output port to control a speaker.
 *
 * The tone is generated by toggling output port bit 7 of the SIO2681,
 * which controls external speaker hardware.
 *
 * Lock 0x0E is used to serialize tone operations and prevent
 * concurrent tone generation from multiple processes.
 */

#ifndef TONE_H
#define TONE_H

#include "base/base.h"

/*
 * ============================================================================
 * Constants
 * ============================================================================
 */

/* Resource lock ID for tone operations (PROC1 lock system) */
#define TONE_LOCK_ID    0x0E

/*
 * ============================================================================
 * Public Function Declarations
 * ============================================================================
 */

/*
 * TONE_$TIME - Play a tone for a specified duration
 *
 * Plays a tone for the duration specified in the clock_t value.
 * Acquires lock 0x0E to prevent concurrent tone operations.
 *
 * Parameters:
 *   duration - Pointer to clock_t containing the tone duration
 *              (48-bit value: 32-bit high + 16-bit low, 4us ticks)
 *
 * Original address: 0x00e172fc
 */
void TONE_$TIME(clock_t *duration);

/*
 * TONE_$ENABLE - Enable or disable the tone output
 *
 * Controls the speaker output via the SIO2681's output port.
 * Bit 7 of the enable byte controls tone state:
 *   - 0xFF (bit 7 set): Enable tone
 *   - 0x00 (bit 7 clear): Disable tone
 *
 * Parameters:
 *   enable - Pointer to enable flag (bit 7 = enable tone)
 *
 * Original address: 0x00e1ace8
 */
void TONE_$ENABLE(uint8_t *enable);

#endif /* TONE_H */
